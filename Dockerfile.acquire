# Build Go acquire binary
FROM golang:1.21-alpine AS build
WORKDIR /app
COPY go.mod go.sum* ./
RUN go mod download 2>/dev/null || true
COPY . .
RUN go build -o /acquire ./cmd/acquire

# Minimal runtime
FROM alpine:3.19
WORKDIR /app
COPY --from=build /acquire /app/acquire
# Default: no CMD; override in compose to run with -url or -file, or keep as worker
ENTRYPOINT ["/app/acquire"]
